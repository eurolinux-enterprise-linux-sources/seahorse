/* pkcs11-private-key.c generated by valac 0.28.0, the Vala compiler
 * generated from pkcs11-private-key.vala, do not modify */

/*
 * Seahorse
 *
 * Copyright (C) 2008 Stefan Walter
 * Copyright (C) 2011 Collabora Ltd.
 * Copyright (C) 2013 Red Hat Inc.
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU Lesser General Public License as
 * published by the Free Software Foundation; either version 2.1 of
 * the License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful, but
 * WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public
 * License along with this program; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
 * 02111-1307, USA.
 */

#include <glib.h>
#include <glib-object.h>
#include "seahorse-pkcs11.h"
#include <gck/gck.h>
#include <gio/gio.h>
#include "seahorse-common.h"
#include <gtk/gtk.h>
#include <stdlib.h>
#include <string.h>
#include <p11-kit/pkcs11.h>
#include <gcr/gcr-base.h>
#include <glib/gi18n-lib.h>

#define __vala_GckAttributes_free0(var) ((var == NULL) ? NULL : (var = (_vala_GckAttributes_free (var), NULL)))
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
#define __vala_GckBuilder_free0(var) ((var == NULL) ? NULL : (var = (_vala_GckBuilder_free (var), NULL)))

#define SEAHORSE_PKCS11_TYPE_KEY_DELETER (seahorse_pkcs11_key_deleter_get_type ())
#define SEAHORSE_PKCS11_KEY_DELETER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SEAHORSE_PKCS11_TYPE_KEY_DELETER, SeahorsePkcs11KeyDeleter))
#define SEAHORSE_PKCS11_KEY_DELETER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SEAHORSE_PKCS11_TYPE_KEY_DELETER, SeahorsePkcs11KeyDeleterClass))
#define SEAHORSE_PKCS11_IS_KEY_DELETER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SEAHORSE_PKCS11_TYPE_KEY_DELETER))
#define SEAHORSE_PKCS11_IS_KEY_DELETER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SEAHORSE_PKCS11_TYPE_KEY_DELETER))
#define SEAHORSE_PKCS11_KEY_DELETER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SEAHORSE_PKCS11_TYPE_KEY_DELETER, SeahorsePkcs11KeyDeleterClass))

typedef struct _SeahorsePkcs11KeyDeleter SeahorsePkcs11KeyDeleter;
typedef struct _SeahorsePkcs11KeyDeleterClass SeahorsePkcs11KeyDeleterClass;
#define __g_list_free__g_object_unref0_0(var) ((var == NULL) ? NULL : (var = (_g_list_free__g_object_unref0_ (var), NULL)))
#define _g_free0(var) (var = (g_free (var), NULL))

struct _SeahorsePkcs11PrivateKeyPrivate {
	GWeakRef _token;
	GckAttributes* _attributes;
	GWeakRef _certificate;
	GIcon* _icon;
};


static gpointer seahorse_pkcs11_private_key_parent_class = NULL;
static GckObjectCacheIface* seahorse_pkcs11_private_key_gck_object_cache_parent_iface = NULL;
static SeahorseDeletableIface* seahorse_pkcs11_private_key_seahorse_deletable_parent_iface = NULL;
static SeahorseExportableIface* seahorse_pkcs11_private_key_seahorse_exportable_parent_iface = NULL;
static SeahorseViewableIface* seahorse_pkcs11_private_key_seahorse_viewable_parent_iface = NULL;

#define SEAHORSE_PKCS11_PRIVATE_KEY_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), SEAHORSE_PKCS11_TYPE_PRIVATE_KEY, SeahorsePkcs11PrivateKeyPrivate))
enum  {
	SEAHORSE_PKCS11_PRIVATE_KEY_DUMMY_PROPERTY,
	SEAHORSE_PKCS11_PRIVATE_KEY_PLACE,
	SEAHORSE_PKCS11_PRIVATE_KEY_OBJECT_FLAGS,
	SEAHORSE_PKCS11_PRIVATE_KEY_ACTIONS,
	SEAHORSE_PKCS11_PRIVATE_KEY_PARTNER,
	SEAHORSE_PKCS11_PRIVATE_KEY_LABEL,
	SEAHORSE_PKCS11_PRIVATE_KEY_MARKUP,
	SEAHORSE_PKCS11_PRIVATE_KEY_DESCRIPTION,
	SEAHORSE_PKCS11_PRIVATE_KEY_ICON,
	SEAHORSE_PKCS11_PRIVATE_KEY_ATTRIBUTES,
	SEAHORSE_PKCS11_PRIVATE_KEY_DELETABLE,
	SEAHORSE_PKCS11_PRIVATE_KEY_EXPORTABLE
};
static void _vala_GckAttributes_free (GckAttributes* self);
static void seahorse_pkcs11_private_key_real_fill (GckObjectCache* base, GckAttributes* attributes);
static void _vala_GckBuilder_free (GckBuilder* self);
static SeahorseDeleter* seahorse_pkcs11_private_key_real_create_deleter (SeahorseDeletable* base);
SeahorsePkcs11KeyDeleter* seahorse_pkcs11_key_deleter_new (GckObject* cert_or_key);
SeahorsePkcs11KeyDeleter* seahorse_pkcs11_key_deleter_construct (GType object_type, GckObject* cert_or_key);
GType seahorse_pkcs11_key_deleter_get_type (void) G_GNUC_CONST;
static GList* seahorse_pkcs11_private_key_real_create_exporters (SeahorseExportable* base, SeahorseExporterType type);
static void _g_object_unref0_ (gpointer var);
static void _g_list_free__g_object_unref0_ (GList* self);
static GtkWindow* seahorse_pkcs11_private_key_real_create_viewer (SeahorseViewable* base, GtkWindow* parent);
static GckAttributes* _vala_GckAttributes_copy (GckAttributes* self);
static void seahorse_pkcs11_private_key_finalize (GObject* obj);
static void _vala_seahorse_pkcs11_private_key_get_property (GObject * object, guint property_id, GValue * value, GParamSpec * pspec);
static void _vala_seahorse_pkcs11_private_key_set_property (GObject * object, guint property_id, const GValue * value, GParamSpec * pspec);


static void _vala_GckAttributes_free (GckAttributes* self) {
	g_boxed_free (gck_attributes_get_type (), self);
}


static void _vala_GckBuilder_free (GckBuilder* self) {
	g_boxed_free (gck_builder_get_type (), self);
}


static void seahorse_pkcs11_private_key_real_fill (GckObjectCache* base, GckAttributes* attributes) {
	SeahorsePkcs11PrivateKey * self;
	GckBuilder* builder = NULL;
	GckBuilder* _tmp0_ = NULL;
	GckAttributes* _tmp1_ = NULL;
	GckBuilder* _tmp4_ = NULL;
	GckAttributes* _tmp5_ = NULL;
	GckBuilder* _tmp6_ = NULL;
	GckAttributes* _tmp7_ = NULL;
	self = (SeahorsePkcs11PrivateKey*) base;
	g_return_if_fail (attributes != NULL);
	_tmp0_ = gck_builder_new (GCK_BUILDER_NONE);
	builder = _tmp0_;
	_tmp1_ = self->priv->_attributes;
	if (_tmp1_ != NULL) {
		GckBuilder* _tmp2_ = NULL;
		GckAttributes* _tmp3_ = NULL;
		_tmp2_ = builder;
		_tmp3_ = self->priv->_attributes;
		gck_builder_add_all (_tmp2_, _tmp3_);
	}
	_tmp4_ = builder;
	_tmp5_ = attributes;
	gck_builder_set_all (_tmp4_, _tmp5_);
	_tmp6_ = builder;
	_tmp7_ = gck_builder_steal (_tmp6_);
	__vala_GckAttributes_free0 (self->priv->_attributes);
	self->priv->_attributes = _tmp7_;
	g_object_notify ((GObject*) self, "attributes");
	__vala_GckBuilder_free0 (builder);
}


static SeahorseDeleter* seahorse_pkcs11_private_key_real_create_deleter (SeahorseDeletable* base) {
	SeahorsePkcs11PrivateKey * self;
	SeahorseDeleter* result = NULL;
	SeahorsePkcs11KeyDeleter* _tmp0_ = NULL;
	self = (SeahorsePkcs11PrivateKey*) base;
	_tmp0_ = seahorse_pkcs11_key_deleter_new ((GckObject*) self);
	result = (SeahorseDeleter*) _tmp0_;
	return result;
}


static void _g_object_unref0_ (gpointer var) {
	(var == NULL) ? NULL : (var = (g_object_unref (var), NULL));
}


static void _g_list_free__g_object_unref0_ (GList* self) {
	g_list_foreach (self, (GFunc) _g_object_unref0_, NULL);
	g_list_free (self);
}


static GList* seahorse_pkcs11_private_key_real_create_exporters (SeahorseExportable* base, SeahorseExporterType type) {
	SeahorsePkcs11PrivateKey * self;
	GList* result = NULL;
	GList* exporters = NULL;
	self = (SeahorsePkcs11PrivateKey*) base;
	exporters = NULL;
	result = exporters;
	return result;
}


static GtkWindow* seahorse_pkcs11_private_key_real_create_viewer (SeahorseViewable* base, GtkWindow* parent) {
	SeahorsePkcs11PrivateKey * self;
	GtkWindow* result = NULL;
	SeahorsePkcs11Properties* viewer = NULL;
	GtkWindow* _tmp0_ = NULL;
	SeahorsePkcs11Properties* _tmp1_ = NULL;
	self = (SeahorsePkcs11PrivateKey*) base;
	_tmp0_ = parent;
	_tmp1_ = seahorse_pkcs11_properties_new ((GckObject*) self, _tmp0_);
	g_object_ref_sink (_tmp1_);
	viewer = _tmp1_;
	gtk_widget_show ((GtkWidget*) viewer);
	result = (GtkWindow*) viewer;
	return result;
}


SeahorsePkcs11PrivateKey* seahorse_pkcs11_private_key_construct (GType object_type) {
	SeahorsePkcs11PrivateKey * self = NULL;
	self = (SeahorsePkcs11PrivateKey*) g_object_new (object_type, NULL);
	return self;
}


SeahorsePkcs11PrivateKey* seahorse_pkcs11_private_key_new (void) {
	return seahorse_pkcs11_private_key_construct (SEAHORSE_PKCS11_TYPE_PRIVATE_KEY);
}


SeahorsePkcs11Token* seahorse_pkcs11_private_key_get_place (SeahorsePkcs11PrivateKey* self) {
	SeahorsePkcs11Token* result;
	GObject* _tmp0_ = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = g_weak_ref_get (&self->priv->_token);
	result = G_TYPE_CHECK_INSTANCE_CAST (_tmp0_, SEAHORSE_PKCS11_TYPE_TOKEN, SeahorsePkcs11Token);
	return result;
}


void seahorse_pkcs11_private_key_set_place (SeahorsePkcs11PrivateKey* self, SeahorsePkcs11Token* value) {
	SeahorsePkcs11Token* _tmp0_ = NULL;
	g_return_if_fail (self != NULL);
	_tmp0_ = value;
	g_weak_ref_set (&self->priv->_token, (GObject*) _tmp0_);
	g_object_notify ((GObject *) self, "place");
}


SeahorseFlags seahorse_pkcs11_private_key_get_object_flags (SeahorsePkcs11PrivateKey* self) {
	SeahorseFlags result;
	g_return_val_if_fail (self != NULL, 0);
	result = SEAHORSE_FLAG_PERSONAL;
	return result;
}


GtkActionGroup* seahorse_pkcs11_private_key_get_actions (SeahorsePkcs11PrivateKey* self) {
	GtkActionGroup* result;
	g_return_val_if_fail (self != NULL, NULL);
	result = NULL;
	return result;
}


SeahorsePkcs11Certificate* seahorse_pkcs11_private_key_get_partner (SeahorsePkcs11PrivateKey* self) {
	SeahorsePkcs11Certificate* result;
	GObject* _tmp0_ = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = g_weak_ref_get (&self->priv->_certificate);
	result = G_TYPE_CHECK_INSTANCE_CAST (_tmp0_, SEAHORSE_PKCS11_TYPE_CERTIFICATE, SeahorsePkcs11Certificate);
	return result;
}


void seahorse_pkcs11_private_key_set_partner (SeahorsePkcs11PrivateKey* self, SeahorsePkcs11Certificate* value) {
	SeahorsePkcs11Certificate* _tmp0_ = NULL;
	g_return_if_fail (self != NULL);
	_tmp0_ = value;
	g_weak_ref_set (&self->priv->_certificate, (GObject*) _tmp0_);
	g_object_notify ((GObject*) self, "partner");
	g_object_notify ((GObject*) self, "description");
	g_object_notify ((GObject *) self, "partner");
}


gchar* seahorse_pkcs11_private_key_get_label (SeahorsePkcs11PrivateKey* self) {
	gchar* result;
	GckAttributes* _tmp0_ = NULL;
	SeahorsePkcs11Certificate* cert = NULL;
	SeahorsePkcs11Certificate* _tmp4_ = NULL;
	SeahorsePkcs11Certificate* _tmp5_ = NULL;
	SeahorsePkcs11Certificate* _tmp6_ = NULL;
	const gchar* _tmp10_ = NULL;
	gchar* _tmp11_ = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = self->priv->_attributes;
	if (_tmp0_ != NULL) {
		gchar* label = NULL;
		GckAttributes* _tmp1_ = NULL;
		gchar* _tmp2_ = NULL;
		gboolean _tmp3_ = FALSE;
		_tmp1_ = self->priv->_attributes;
		_tmp3_ = gck_attributes_find_string (_tmp1_, CKA_LABEL, &_tmp2_);
		_g_free0 (label);
		label = _tmp2_;
		if (_tmp3_) {
			result = label;
			return result;
		}
		_g_free0 (label);
	}
	_tmp4_ = seahorse_pkcs11_private_key_get_partner (self);
	_tmp5_ = _tmp4_;
	cert = _tmp5_;
	_tmp6_ = cert;
	if (_tmp6_ != NULL) {
		SeahorsePkcs11Certificate* _tmp7_ = NULL;
		gchar* _tmp8_ = NULL;
		gchar* _tmp9_ = NULL;
		_tmp7_ = cert;
		g_object_get ((GcrCertificate*) _tmp7_, "label", &_tmp8_, NULL);
		_tmp9_ = _tmp8_;
		result = _tmp9_;
		_g_object_unref0 (cert);
		return result;
	}
	_tmp10_ = _ ("Unnamed private key");
	_tmp11_ = g_strdup (_tmp10_);
	result = _tmp11_;
	_g_object_unref0 (cert);
	return result;
}


gchar* seahorse_pkcs11_private_key_get_markup (SeahorsePkcs11PrivateKey* self) {
	gchar* result;
	gchar* _tmp0_ = NULL;
	gchar* _tmp1_ = NULL;
	gchar* _tmp2_ = NULL;
	gchar* _tmp3_ = NULL;
	gchar* _tmp4_ = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = seahorse_pkcs11_private_key_get_label (self);
	_tmp1_ = _tmp0_;
	_tmp2_ = _tmp1_;
	_tmp3_ = g_markup_escape_text (_tmp2_, (gssize) (-1));
	_tmp4_ = _tmp3_;
	_g_free0 (_tmp2_);
	result = _tmp4_;
	return result;
}


const gchar* seahorse_pkcs11_private_key_get_description (SeahorsePkcs11PrivateKey* self) {
	const gchar* result;
	const gchar* _tmp0_ = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = _ ("Private key");
	result = _tmp0_;
	return result;
}


GIcon* seahorse_pkcs11_private_key_get_icon (SeahorsePkcs11PrivateKey* self) {
	GIcon* result;
	GIcon* _tmp0_ = NULL;
	GIcon* _tmp2_ = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = self->priv->_icon;
	if (_tmp0_ == NULL) {
		GThemedIcon* _tmp1_ = NULL;
		_tmp1_ = (GThemedIcon*) g_themed_icon_new (GCR_ICON_KEY);
		_g_object_unref0 (self->priv->_icon);
		self->priv->_icon = (GIcon*) _tmp1_;
	}
	_tmp2_ = self->priv->_icon;
	result = _tmp2_;
	return result;
}


static GckAttributes* _vala_GckAttributes_copy (GckAttributes* self) {
	return g_boxed_copy (gck_attributes_get_type (), self);
}


static gpointer __vala_GckAttributes_copy0 (gpointer self) {
	return self ? _vala_GckAttributes_copy (self) : NULL;
}


static GckAttributes* seahorse_pkcs11_private_key_real_get_attributes (GckObjectCache* base) {
	GckAttributes* result;
	SeahorsePkcs11PrivateKey* self;
	GckAttributes* _tmp0_ = NULL;
	GckAttributes* _tmp1_ = NULL;
	self = (SeahorsePkcs11PrivateKey*) base;
	_tmp0_ = self->priv->_attributes;
	_tmp1_ = __vala_GckAttributes_copy0 (_tmp0_);
	result = _tmp1_;
	return result;
}


static void seahorse_pkcs11_private_key_real_set_attributes (GckObjectCache* base, GckAttributes* value) {
	SeahorsePkcs11PrivateKey* self;
	GckAttributes* _tmp0_ = NULL;
	GckAttributes* _tmp1_ = NULL;
	self = (SeahorsePkcs11PrivateKey*) base;
	_tmp0_ = value;
	_tmp1_ = __vala_GckAttributes_copy0 (_tmp0_);
	__vala_GckAttributes_free0 (self->priv->_attributes);
	self->priv->_attributes = _tmp1_;
	g_object_notify ((GObject*) self, "attributes");
	g_object_notify ((GObject *) self, "attributes");
}


static gboolean seahorse_pkcs11_private_key_real_get_deletable (SeahorseDeletable* base) {
	gboolean result;
	SeahorsePkcs11PrivateKey* self;
	SeahorsePkcs11Token* token = NULL;
	SeahorsePkcs11Token* _tmp0_ = NULL;
	SeahorsePkcs11Token* _tmp1_ = NULL;
	gboolean _tmp2_ = FALSE;
	SeahorsePkcs11Token* _tmp3_ = NULL;
	self = (SeahorsePkcs11PrivateKey*) base;
	_tmp0_ = seahorse_pkcs11_private_key_get_place (self);
	_tmp1_ = _tmp0_;
	token = _tmp1_;
	_tmp3_ = token;
	if (_tmp3_ == NULL) {
		_tmp2_ = FALSE;
	} else {
		SeahorsePkcs11Token* _tmp4_ = NULL;
		gboolean _tmp5_ = FALSE;
		_tmp4_ = token;
		_tmp5_ = seahorse_pkcs11_token_is_deletable (_tmp4_, (GckObject*) self);
		_tmp2_ = _tmp5_;
	}
	result = _tmp2_;
	_g_object_unref0 (token);
	return result;
}


static gboolean seahorse_pkcs11_private_key_real_get_exportable (SeahorseExportable* base) {
	gboolean result;
	SeahorsePkcs11PrivateKey* self;
	self = (SeahorsePkcs11PrivateKey*) base;
	result = FALSE;
	return result;
}


static void seahorse_pkcs11_private_key_class_init (SeahorsePkcs11PrivateKeyClass * klass) {
	seahorse_pkcs11_private_key_parent_class = g_type_class_peek_parent (klass);
	g_type_class_add_private (klass, sizeof (SeahorsePkcs11PrivateKeyPrivate));
	G_OBJECT_CLASS (klass)->get_property = _vala_seahorse_pkcs11_private_key_get_property;
	G_OBJECT_CLASS (klass)->set_property = _vala_seahorse_pkcs11_private_key_set_property;
	G_OBJECT_CLASS (klass)->finalize = seahorse_pkcs11_private_key_finalize;
	g_object_class_install_property (G_OBJECT_CLASS (klass), SEAHORSE_PKCS11_PRIVATE_KEY_PLACE, g_param_spec_object ("place", "place", "place", SEAHORSE_PKCS11_TYPE_TOKEN, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE | G_PARAM_WRITABLE));
	g_object_class_install_property (G_OBJECT_CLASS (klass), SEAHORSE_PKCS11_PRIVATE_KEY_OBJECT_FLAGS, g_param_spec_flags ("object-flags", "object-flags", "object-flags", SEAHORSE_TYPE_FLAGS, 0, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE));
	g_object_class_install_property (G_OBJECT_CLASS (klass), SEAHORSE_PKCS11_PRIVATE_KEY_ACTIONS, g_param_spec_object ("actions", "actions", "actions", gtk_action_group_get_type (), G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE));
	g_object_class_install_property (G_OBJECT_CLASS (klass), SEAHORSE_PKCS11_PRIVATE_KEY_PARTNER, g_param_spec_object ("partner", "partner", "partner", SEAHORSE_PKCS11_TYPE_CERTIFICATE, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE | G_PARAM_WRITABLE));
	g_object_class_install_property (G_OBJECT_CLASS (klass), SEAHORSE_PKCS11_PRIVATE_KEY_LABEL, g_param_spec_string ("label", "label", "label", NULL, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE));
	g_object_class_install_property (G_OBJECT_CLASS (klass), SEAHORSE_PKCS11_PRIVATE_KEY_MARKUP, g_param_spec_string ("markup", "markup", "markup", NULL, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE));
	g_object_class_install_property (G_OBJECT_CLASS (klass), SEAHORSE_PKCS11_PRIVATE_KEY_DESCRIPTION, g_param_spec_string ("description", "description", "description", NULL, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE));
	g_object_class_install_property (G_OBJECT_CLASS (klass), SEAHORSE_PKCS11_PRIVATE_KEY_ICON, g_param_spec_object ("icon", "icon", "icon", G_TYPE_ICON, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE));
	g_object_class_install_property (G_OBJECT_CLASS (klass), SEAHORSE_PKCS11_PRIVATE_KEY_ATTRIBUTES, g_param_spec_boxed ("attributes", "attributes", "attributes", gck_attributes_get_type (), G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE | G_PARAM_WRITABLE));
	g_object_class_install_property (G_OBJECT_CLASS (klass), SEAHORSE_PKCS11_PRIVATE_KEY_DELETABLE, g_param_spec_boolean ("deletable", "deletable", "deletable", FALSE, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE));
	g_object_class_install_property (G_OBJECT_CLASS (klass), SEAHORSE_PKCS11_PRIVATE_KEY_EXPORTABLE, g_param_spec_boolean ("exportable", "exportable", "exportable", FALSE, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE));
}


static void seahorse_pkcs11_private_key_gck_object_cache_interface_init (GckObjectCacheIface * iface) {
	seahorse_pkcs11_private_key_gck_object_cache_parent_iface = g_type_interface_peek_parent (iface);
	iface->fill = (void (*)(GckObjectCache*, GckAttributes*)) seahorse_pkcs11_private_key_real_fill;
}


static void seahorse_pkcs11_private_key_seahorse_deletable_interface_init (SeahorseDeletableIface * iface) {
	seahorse_pkcs11_private_key_seahorse_deletable_parent_iface = g_type_interface_peek_parent (iface);
	iface->create_deleter = (SeahorseDeleter* (*)(SeahorseDeletable*)) seahorse_pkcs11_private_key_real_create_deleter;
	iface->get_deletable = seahorse_pkcs11_private_key_real_get_deletable;
}


static void seahorse_pkcs11_private_key_seahorse_exportable_interface_init (SeahorseExportableIface * iface) {
	seahorse_pkcs11_private_key_seahorse_exportable_parent_iface = g_type_interface_peek_parent (iface);
	iface->create_exporters = (GList* (*)(SeahorseExportable*, SeahorseExporterType)) seahorse_pkcs11_private_key_real_create_exporters;
	iface->get_exportable = seahorse_pkcs11_private_key_real_get_exportable;
}


static void seahorse_pkcs11_private_key_seahorse_viewable_interface_init (SeahorseViewableIface * iface) {
	seahorse_pkcs11_private_key_seahorse_viewable_parent_iface = g_type_interface_peek_parent (iface);
	iface->create_viewer = (GtkWindow* (*)(SeahorseViewable*, GtkWindow*)) seahorse_pkcs11_private_key_real_create_viewer;
}


static void seahorse_pkcs11_private_key_instance_init (SeahorsePkcs11PrivateKey * self) {
	self->priv = SEAHORSE_PKCS11_PRIVATE_KEY_GET_PRIVATE (self);
}


static void seahorse_pkcs11_private_key_finalize (GObject* obj) {
	SeahorsePkcs11PrivateKey * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, SEAHORSE_PKCS11_TYPE_PRIVATE_KEY, SeahorsePkcs11PrivateKey);
	g_weak_ref_clear (&self->priv->_token);
	__vala_GckAttributes_free0 (self->priv->_attributes);
	g_weak_ref_clear (&self->priv->_certificate);
	_g_object_unref0 (self->priv->_icon);
	G_OBJECT_CLASS (seahorse_pkcs11_private_key_parent_class)->finalize (obj);
}


GType seahorse_pkcs11_private_key_get_type (void) {
	static volatile gsize seahorse_pkcs11_private_key_type_id__volatile = 0;
	if (g_once_init_enter (&seahorse_pkcs11_private_key_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (SeahorsePkcs11PrivateKeyClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) seahorse_pkcs11_private_key_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (SeahorsePkcs11PrivateKey), 0, (GInstanceInitFunc) seahorse_pkcs11_private_key_instance_init, NULL };
		static const GInterfaceInfo gck_object_cache_info = { (GInterfaceInitFunc) seahorse_pkcs11_private_key_gck_object_cache_interface_init, (GInterfaceFinalizeFunc) NULL, NULL};
		static const GInterfaceInfo seahorse_deletable_info = { (GInterfaceInitFunc) seahorse_pkcs11_private_key_seahorse_deletable_interface_init, (GInterfaceFinalizeFunc) NULL, NULL};
		static const GInterfaceInfo seahorse_exportable_info = { (GInterfaceInitFunc) seahorse_pkcs11_private_key_seahorse_exportable_interface_init, (GInterfaceFinalizeFunc) NULL, NULL};
		static const GInterfaceInfo seahorse_viewable_info = { (GInterfaceInitFunc) seahorse_pkcs11_private_key_seahorse_viewable_interface_init, (GInterfaceFinalizeFunc) NULL, NULL};
		GType seahorse_pkcs11_private_key_type_id;
		seahorse_pkcs11_private_key_type_id = g_type_register_static (gck_object_get_type (), "SeahorsePkcs11PrivateKey", &g_define_type_info, 0);
		g_type_add_interface_static (seahorse_pkcs11_private_key_type_id, gck_object_cache_get_type (), &gck_object_cache_info);
		g_type_add_interface_static (seahorse_pkcs11_private_key_type_id, SEAHORSE_TYPE_DELETABLE, &seahorse_deletable_info);
		g_type_add_interface_static (seahorse_pkcs11_private_key_type_id, SEAHORSE_TYPE_EXPORTABLE, &seahorse_exportable_info);
		g_type_add_interface_static (seahorse_pkcs11_private_key_type_id, SEAHORSE_TYPE_VIEWABLE, &seahorse_viewable_info);
		g_once_init_leave (&seahorse_pkcs11_private_key_type_id__volatile, seahorse_pkcs11_private_key_type_id);
	}
	return seahorse_pkcs11_private_key_type_id__volatile;
}


static void _vala_seahorse_pkcs11_private_key_get_property (GObject * object, guint property_id, GValue * value, GParamSpec * pspec) {
	SeahorsePkcs11PrivateKey * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, SEAHORSE_PKCS11_TYPE_PRIVATE_KEY, SeahorsePkcs11PrivateKey);
	switch (property_id) {
		case SEAHORSE_PKCS11_PRIVATE_KEY_PLACE:
		g_value_take_object (value, seahorse_pkcs11_private_key_get_place (self));
		break;
		case SEAHORSE_PKCS11_PRIVATE_KEY_OBJECT_FLAGS:
		g_value_set_flags (value, seahorse_pkcs11_private_key_get_object_flags (self));
		break;
		case SEAHORSE_PKCS11_PRIVATE_KEY_ACTIONS:
		g_value_set_object (value, seahorse_pkcs11_private_key_get_actions (self));
		break;
		case SEAHORSE_PKCS11_PRIVATE_KEY_PARTNER:
		g_value_take_object (value, seahorse_pkcs11_private_key_get_partner (self));
		break;
		case SEAHORSE_PKCS11_PRIVATE_KEY_LABEL:
		g_value_take_string (value, seahorse_pkcs11_private_key_get_label (self));
		break;
		case SEAHORSE_PKCS11_PRIVATE_KEY_MARKUP:
		g_value_take_string (value, seahorse_pkcs11_private_key_get_markup (self));
		break;
		case SEAHORSE_PKCS11_PRIVATE_KEY_DESCRIPTION:
		g_value_set_string (value, seahorse_pkcs11_private_key_get_description (self));
		break;
		case SEAHORSE_PKCS11_PRIVATE_KEY_ICON:
		g_value_set_object (value, seahorse_pkcs11_private_key_get_icon (self));
		break;
		case SEAHORSE_PKCS11_PRIVATE_KEY_ATTRIBUTES:
		g_value_take_boxed (value, seahorse_pkcs11_private_key_real_get_attributes ((GckObjectCache*) self));
		break;
		case SEAHORSE_PKCS11_PRIVATE_KEY_DELETABLE:
		g_value_set_boolean (value, seahorse_deletable_get_deletable ((SeahorseDeletable*) self));
		break;
		case SEAHORSE_PKCS11_PRIVATE_KEY_EXPORTABLE:
		g_value_set_boolean (value, seahorse_exportable_get_exportable ((SeahorseExportable*) self));
		break;
		default:
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
		break;
	}
}


static void _vala_seahorse_pkcs11_private_key_set_property (GObject * object, guint property_id, const GValue * value, GParamSpec * pspec) {
	SeahorsePkcs11PrivateKey * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, SEAHORSE_PKCS11_TYPE_PRIVATE_KEY, SeahorsePkcs11PrivateKey);
	switch (property_id) {
		case SEAHORSE_PKCS11_PRIVATE_KEY_PLACE:
		seahorse_pkcs11_private_key_set_place (self, g_value_get_object (value));
		break;
		case SEAHORSE_PKCS11_PRIVATE_KEY_PARTNER:
		seahorse_pkcs11_private_key_set_partner (self, g_value_get_object (value));
		break;
		case SEAHORSE_PKCS11_PRIVATE_KEY_ATTRIBUTES:
		seahorse_pkcs11_private_key_real_set_attributes ((GckObjectCache*) self, g_value_get_boxed (value));
		break;
		default:
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
		break;
	}
}



